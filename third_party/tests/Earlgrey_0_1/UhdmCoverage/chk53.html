
<!DOCTYPE html>
<html>
<head>
<style>
body {

}
p {
font-size: 14px;
}</style>
<h3>../src/lowrisc_ip_flash_ctrl_0.1/rtl/flash_phy_rd_buffers.sv Cov: 100% </h3>
<pre style="margin:0; padding:0 ">// Copyright lowRISC contributors.</pre>
<pre style="margin:0; padding:0 ">// Licensed under the Apache License, Version 2.0, see LICENSE for details.</pre>
<pre style="margin:0; padding:0 ">// SPDX-License-Identifier: Apache-2.0</pre>
<pre style="margin:0; padding:0 ">//</pre>
<pre style="margin:0; padding:0 ">// Flash Phy Read Buffers</pre>
<pre style="margin:0; padding:0 ">//</pre>
<pre style="margin:0; padding:0 ">// This module implements the read buffers</pre>
<pre style="margin:0; padding:0 ">// These buffers are straightforward flip flop storage.</pre>
<pre style="margin:0; padding:0 ">// There are 3 inputs, alloc, upate and wipe.</pre>
<pre style="margin:0; padding:0 ">//</pre>
<pre style="margin:0; padding:0 ">// Alloc happens when a buffer is allocated, the state transitions to WIP.</pre>
<pre style="margin:0; padding:0 ">//</pre>
<pre style="margin:0; padding:0 ">// Update happens when a buffer has already been allocated, and is now being updated with data, the</pre>
<pre style="margin:0; padding:0 ">// state transitions to VALID.</pre>
<pre style="margin:0; padding:0 ">//</pre>
<pre style="margin:0; padding:0 ">// Wipe happens when a buffer is wiped due to a program being issued to the same location, the</pre>
<pre style="margin:0; padding:0 ">// state transitions to INVALID</pre>
<pre style="margin:0; padding:0 ">//</pre>
<pre style="margin:0; padding:0 ">// Basically...this is a tag ram + data ram combined into one</pre>
<pre style="margin:0; padding:0 ">//</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">module flash_phy_rd_buffers import flash_phy_pkg::*; (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  input clk_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  input rst_ni,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  input alloc_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  input update_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  input wipe_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  input [PrimFlashAddrW-1:0] addr_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  input [DataWidth-1:0] data_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  output rd_buf_t out_o</pre>
<pre style="margin:0; padding:0 ">);</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  always_ff @(posedge clk_i or negedge rst_ni) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    if (!rst_ni) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">      out_o.data <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">      out_o.addr <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">      out_o.attr <= Invalid;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    end else if (wipe_i) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">      out_o.attr <= Invalid;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    end else if (alloc_i) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">      out_o.addr <= addr_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">      out_o.attr <= Wip;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    end else if (update_i) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">      out_o.data <= data_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">      out_o.attr <= Valid;</pre>
<pre style="margin:0; padding:0 ">    end</pre>
<pre style="margin:0; padding:0 ">  end</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">endmodule // flash_phy_rd_buffers</pre>
<pre style="margin:0; padding:0 "></pre>
</body>
</html>
