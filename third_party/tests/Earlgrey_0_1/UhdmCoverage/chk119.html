
<!DOCTYPE html>
<html>
<head>
<style>
body {

}
p {
font-size: 14px;
}</style>
<h3>../src/lowrisc_ip_pwrmgr_pkg_0.1/rtl/pwrmgr_pkg.sv Cov: 86% </h3>
<pre style="margin:0; padding:0 ">// Copyright lowRISC contributors.</pre>
<pre style="margin:0; padding:0 ">// Licensed under the Apache License, Version 2.0, see LICENSE for details.</pre>
<pre style="margin:0; padding:0 ">// SPDX-License-Identifier: Apache-2.0</pre>
<pre style="margin:0; padding:0 ">//</pre>
<pre style="margin:0; padding:0 ">// Power Manager Package</pre>
<pre style="margin:0; padding:0 ">//</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">package pwrmgr_pkg;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // global constant</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter ALWAYS_ON_DOMAIN = 0;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // variables referenced by other modules / packages</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter HwRstReqs = 2;    // this needs to be a topgen populated number, or from topcfg?</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter PowerDomains = 2; // this maybe needs to be a topgen populated number, or from topcfg?</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // variables referenced only by pwrmgr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  localparam WakeUpPeris = 16; // this needs to be a topgen populated number, or from topcfg?</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  localparam TotalWakeWidth = WakeUpPeris + 2; // Abort and fall through are added</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // pwrmgr to ast</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic main_pd_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic pwr_clamp;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic slow_clk_en;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic core_clk_en;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic io_clk_en;</pre>
<pre id="id29" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_ast_req_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic [1:0] slow_clk_val;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic [1:0] core_clk_val;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic [1:0] io_clk_val;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic main_pok;</pre>
<pre id="id36" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_ast_rsp_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // default value of pwr_ast_rsp (for dangling ports)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter pwr_ast_rsp_t PWR_AST_RSP_DEFAULT = '{</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    slow_clk_val: 2'b10,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    core_clk_val: 2'b10,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    io_clk_val: 2'b10,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    main_pok: 1'b1</pre>
<pre style="margin:0; padding:0 ">  };</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter pwr_ast_rsp_t PWR_AST_RSP_SYNC_DEFAULT = '{</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    slow_clk_val: 2'b01,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    core_clk_val: 2'b01,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    io_clk_val: 2'b10,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    main_pok: 1'b0</pre>
<pre style="margin:0; padding:0 ">  };</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // reasons for pwrmgr reset reset</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef enum logic [1:0] {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    ResetNone = 0,     // there is no reset</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    LowPwrEntry = 1,   // reset is caused by low power entry</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    HwReq = 2,         // reset is caused by peripheral reset requests</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    ResetUndefined = 3 // this should never happen outside of POR</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  } reset_cause_e;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // pwrmgr to rstmgr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic [PowerDomains-1:0] rst_lc_req;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic [PowerDomains-1:0] rst_sys_req;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    reset_cause_e reset_cause;</pre>
<pre id="id66" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_rst_req_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // rstmgr to pwrmgr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic [PowerDomains-1:0] rst_lc_src_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic [PowerDomains-1:0] rst_sys_src_n;</pre>
<pre id="id72" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_rst_rsp_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // default value (for dangling ports)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter pwr_rst_rsp_t PWR_RST_RSP_DEFAULT = '{</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    rst_lc_src_n: {PowerDomains{1'b1}},</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    rst_sys_src_n: {PowerDomains{1'b1}}</pre>
<pre style="margin:0; padding:0 ">  };</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // pwrmgr to clkmgr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic ip_clk_en;</pre>
<pre id="id83" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_clk_req_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // clkmgr to powrmgr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic roots_en;</pre>
<pre id="id88" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_clk_rsp_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // pwrmgr to otp</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic otp_init;</pre>
<pre id="id93" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_otp_req_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // otp to pwrmgr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic otp_done;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic otp_idle;</pre>
<pre id="id99" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_otp_rsp_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // default value (for dangling ports)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter pwr_otp_rsp_t PWR_OTP_RSP_DEFAULT = '{</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    otp_done: 1'b1,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    otp_idle: 1'b1</pre>
<pre style="margin:0; padding:0 ">  };</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // pwrmgr to lifecycle</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic lc_init;</pre>
<pre id="id110" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_lc_req_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // lifecycle to pwrmgr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic lc_done;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic lc_idle;</pre>
<pre id="id116" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_lc_rsp_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // default value (for dangling ports)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter pwr_lc_rsp_t PWR_LC_RSP_DEFAULT = '{</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    lc_done: 1'b1,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    lc_idle: 1'b1</pre>
<pre style="margin:0; padding:0 ">  };</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // flash to pwrmgr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic flash_idle;</pre>
<pre id="id127" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_flash_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // default value (for dangling ports)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter pwr_flash_t PWR_FLASH_DEFAULT = '{</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    flash_idle: 1'b1</pre>
<pre style="margin:0; padding:0 ">  };</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // processor to pwrmgr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic core_sleeping;</pre>
<pre id="id137" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_cpu_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // default value (for dangling ports)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter pwr_cpu_t PWR_CPU_DEFAULT = '{</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    core_sleeping: 1'b0</pre>
<pre style="margin:0; padding:0 ">  };</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // peripherals to pwrmgr</pre>
<pre style="margin:0; padding:0 ">  // TODO, switch this to two logic arrays once the option to support</pre>
<pre style="margin:0; padding:0 ">  // logic during intermodule.py is in.</pre>
<pre style="margin:0; padding:0 ">  // Structs are used for now since these happen to support dangling port</pre>
<pre style="margin:0; padding:0 ">  // defaults.</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic [WakeUpPeris-1:0] wakeups;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    logic [HwRstReqs-1:0] rstreqs;</pre>
<pre id="id152" style="background-color: #FFB6C1; margin:0; padding:0 ">  } pwr_peri_t;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // default value (for dangling ports)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  parameter pwr_peri_t PWR_PERI_DEFAULT = '{</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    wakeups: WakeUpPeris'(1'b1),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    rstreqs: '0</pre>
<pre style="margin:0; padding:0 ">  };</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // power-up causes</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef enum logic [1:0] {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    Por   = 2'h0,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    Wake  = 2'h1,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    Reset = 2'h2</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  } pwrup_cause_e;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">  // low power hints</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  typedef enum logic {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    None     = 1'b0,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">    LowPower = 1'b1</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  } low_power_hint_e;</pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 "></pre>
<pre style="margin:0; padding:0 ">endpackage // pwrmgr_pkg</pre>
<pre style="margin:0; padding:0 "></pre>
</body>
</html>
